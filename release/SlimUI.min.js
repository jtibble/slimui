var bootstrapModule=angular.module("bootstrapModule",[]);bootstrapModule.provider("bootstrapper",function(){return{$get:["$http","$q",function(e,o){return{bootstrap:function(t){var n=o.defer();return e.get("config.json").success(function(e){var o=angular.module(t);angular.forEach(e,function(e,t){o.constant(t,e)}),angular.bootstrap(document,[t]),n.resolve()}).error(function(){console.log("Could not initialize application, configuration could not be loaded."),n.reject()}),n.promise}}}]}});var appContainer=document.createElement("div");bootstrapModule.run(["bootstrapper",function(e){e.bootstrap("Framework").then(function(){appContainer.remove()})}]),angular.element(document).ready(function(){angular.bootstrap(appContainer,["bootstrapModule"])});var framework=angular.module("Framework",["ui.router","ui.bootstrap","ngTouch","Framework.Services"]),validateConfigFileStructure=function(e){var o=function(e,o){var t=function(o){console.log("Config.json Validation Error: View/Component '"+e+"' "+o)};return o?o.model&&!o.modelbuilder?(t(" is invalid: if includes model, must also include modelbuilder"),!1):o.modelbuilder&&!o.model?(t(" is invalid: if includes modelbuilder, must also include model"),!1):o.actions&&!o.controller?(t(" is invalid: if includes actions, must also include controller"),!1):o.modelbuilder&&!o.controller?(t(" is invalid: if includes modelbuilder, must also include controller"),!1):!0:(t("can't be validated"),!1)},t=!0;if(e.defaultView&&e.views[e.defaultView]&&(o(e.defaultView,e.views[e.defaultView])||(console.log("Config defaultView exists, but points to an invalid view"),t=!1)),e.views)for(var n in e.views){var r=e.views[n];o(n,r)||(console.log("	View '"+n+"' is invalid with broken template or controller"),t=!1),r.regions&&(r.url||(console.log("View '"+n+"' is invalid: cannot specify regions without 'url' property"),t=!1))}if(e.components)for(var i in e.components)o(i,e.components[i])||(t=!1,console.log("	Component '"+i+"' is invalid with broken template or controller"));return t};framework.config(["$stateProvider","$urlRouterProvider","applicationConfig","$compileProvider","$provide","RouterProvider",function(e,o,t,n,r,i){this.applicationConfig=t,this.postConfigProvider=r,framework._directive=framework.directive,framework.directive=function(e,o){return n.directive(e,o),this},validateConfigFileStructure(t)||console.log("SlimUI ERROR: config.json file is invalid");var a=function(o,n,r){var i,l=function(e,o){var t="";for(var n in o){var r=o[n];t+="/{"+r+"}"}return"/"==e&&(e=""),"/"+e+t},s=function(e,o){return e&&o?o+"."+e:e?e:void console.log("Error: Can't create router state from view name and/or parent view name")};i=n.url?l(n.url,n.parameters):l(o,n.parameters);var c=s(o,r),d={url:i,template:"<div "+o+"></div>"};e.state(c,d);for(var u in n.subroutes){var f=n.subroutes[u],p=t.views[f];a(f,p,r?r+"."+o:o)}};for(var l in t.views){var s=t.views[l];void 0!==s.url&&a(l,s)}var c=t.views[t.defaultView],d=c.url;if(c.parameters)for(var u=0;u<c.parameters.length;u++)d+="/";i.setHomeRoute(d),o.otherwise(function(e,o){return console.log("Invalid location '"+o.$$url+"', going to default route '"+d+"'"),d})}]),framework.run(function(){var e=function(e,o){var t=e.toLowerCase();framework.directive(t,["$http","$controller","$compile","$templateCache","$injector","$q","$stateParams",function(t,n,r,i,a,l,s){function c(t,i){var l=t.$new(),c=e+"Template",d=e+"Model",u=e+"Modelbuilder",f=e+"Actions",p=e+"Controller",v=!1;if(o.template&&!window[c]&&(console.log("Couldn't correctly load template named '"+c+"'."),v=!0),o.model&&!window[d]&&(console.log("Couldn't correctly load model named '"+d+"'."),v=!0),o.model&&!window[d]&&(console.log("Couldn't correctly load modelbuilder named '"+u+"'."),v=!0),o.model&&!window[d]&&(console.log("Couldn't correctly load actions named '"+f+"'."),v=!0),o.model&&!window[d]&&(console.log("Couldn't correctly load controller named '"+p+"'."),v=!0),v)return void console.log("Check spelling in file and config.json. Aborting creation of '"+e+"'");var m=function(e){var o;try{o=a.annotate(window[e])}catch(t){console.log("Error: Failed to find dependency injection information for '"+e+"'.\n	Please check in the file that the function name is spelled correctly.")}var n=[];for(var r in o){var i=o[r];if("Context"!=i&&"Actions"!=i&&"Model"!=i&&"Modelbuilder"!=i&&"StateParameters"!=i)try{a.get(i)}catch(l){n.push(i)}}n.length&&console.log("Error: Not all of "+e+"'s dependencies have been loaded correctly.\n	Missing dependencies: "+n.toString()+"\nIf these are newly-added dependency injections, have they been added to config.json and named correctly? Additionally, check that the spelling in "+e+" matches the function name in the dependency's JavaScript file.")};o.modelbuilder&&m(u),o.actions&&m(f),o.controller&&m(p);var g,w,h;if(window[d])try{var C={Model:window[d]()};g=n(window[u],C)}catch(b){console.log("Error: Could not inject model into modelbuilder '"+u+"'. Exception: \n	"+b.message)}if(window[f])try{var y={Context:l};g&&(y.Modelbuilder=g),w=n(window[f],y)}catch(b){console.log("Error: Could not inject context or modelbuilder into actions '"+f+"'. Exception: \n	"+b.message)}try{var k={Context:l,StateParameters:s};g&&(k.Modelbuilder=g),w&&(k.Actions=w),h=n(window[p],k)}catch(b){console.log("Error: Could not inject dependencies into controller '"+p+"'. Likely cause: Actions or Modelbuilder is trying to use a service that was not injected. Check Actions and Modelbuilder injections. Exception: \n	"+b.message)}i.html(window[c]),i.children().data("$ngControllerController",h),r(i.contents())(l)}return{link:c,scope:{attributeParameter:"@"}}}])},o=function(e){return function(){return{template:e}}},t=function(t,n){n.model||n.modelbuilder||n.actions||n.controller?e(t,n):(templateName=t+"Template",t=t.toLowerCase(),framework.directive(t,o(window[templateName])))};for(var n in this.applicationConfig.components){var r=applicationConfig.components[n];t(n,r)}for(var i in this.applicationConfig.views){var a=applicationConfig.views[i];t(i,a)}window.servicesToInject={};var l=function(e){return{$get:window[e]}};for(var s in this.applicationConfig.services)window[s]?(window.servicesToInject[s]=l(s),this.postConfigProvider.provider(s,window.servicesToInject[s])):console.log("Error: '"+s+"' service was specified in config.json but has not been loaded. Check that it exists in your compiled application.")});var framework=angular.module("Framework.Services",[]);framework.provider("Router",function(){var e,o={notRouting:"Router is not navigating to the same route",routingHome:"Router is going to default screen "};return{$get:["$state",function(t){return{goTo:function(e,n){t.current.name!==e||n?t.go(e,n):console.log(o.notRouting)},goToHome:function(){console.log(o.routingHome+e),t.go(e)},getStateParameters:function(){return t.params}}}],setHomeRoute:function(o){e=o}}}),framework.provider("ControllerCommunication",function(){var e={},o={};return{$get:function(){return{registerCallback:function(e,t){o[e]||(o[e]=[]),o[e].push(t)},notifyObservers:function(e){o[e]&&o[e].length&&angular.forEach(o[e],function(e){e()})},get:function(o){return"undefined"!=e[o]?e[o]:(console.log("ControllerCommunication Error: no channel '"+o+"' existing to return data"),!1)},set:function(o,t){e[o]=t,this.notifyObservers(o)}}}}}),framework.provider("FrameworkAJAX",function(){return{$get:["$http",function(e){return{sendRequest:function(o,t,n){return o.method&&o.url&&o.data?e(o).success(t).error(n):void console.log("Error making AJAX request: missing method, url, or data.")}}}]}}),framework.provider("Promise",function(){return{$get:["$q",function(e){return{promisesStorage:{},createDeferred:function(o){return this.promisesStorage[o]=e.defer(),!0},getPromise:function(e){return this.promisesStorage[e]?this.promisesStorage[e].promise:(console.log("Can't return promise: deferred not created correctly"),!1)},resolveDeferred:function(e,o){return this.promisesStorage[e]&&this.promisesStorage[e].resolve?(this.promisesStorage[e].resolve(o),!0):(console.log("Can't resolve: deferred not created correctly"),!1)},rejectDeferred:function(e,o){return this.promisesStorage[e]&&this.promisesStorage[e].reject?(this.promisesStorage[e].reject(o),!0):(console.log("Can't reject: deferred not created correctly"),!1)}}}]}}),framework.provider("PropertyValidation",function(){return validationMappings={},{$get:function(){return{validationTypes:{required:"Validates that an input has (or does not have) a value set",length:"Validates that an input's length is a precise number of characters",min:"Validates that an input's value is greater than a certain value",max:"Validates that an input's value is less than a certain value",regex:"Validates that an input conforms to a particular structure"},getPropertyValidationTypes:function(){return this.validationTypes},addPropertyValidation:function(e,o,t){return void 0===this.validationTypes[o]?(console.log("Cannot add unknown validation type '"+o+"'"),!1):(validationMappings[e]||(validationMappings[e]=[]),void validationMappings[e].push({validationType:o,validationValue:t}))},getPropertyValidationRules:function(e){return validationMappings[e]?validationMappings[e]:(console.log("No property validation rule found for '"+e+"'"),[])}}}}}),framework.directive("slimuivalidate",["PropertyValidation",function(e){return{require:"ngModel",restrict:"A",link:function(o,t,n,r){r&&(r.$validators.propertyValidation=function(o,t){var r=e.getPropertyValidationRules(n.slimuivalidate),i={required:function(e){return!e||e&&t.toString().length>0?!0:!1},length:function(e){return t.toString().length===e?!0:!1},min:function(e){return t>=e?!0:!1},max:function(e){return e>=t?!0:!1},regex:function(e){return e.test(t)}};for(var a in r){var l,s=r[a],c=s.validationType,d=s.validationValue;if(!i[c])throw"Cannot validate unknown validation rule type '"+c+"'!";if(l=i[c](d),!l)return!1}})}}}]);