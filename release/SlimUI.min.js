var bootstrapModule=angular.module("bootstrapModule",[]);bootstrapModule.provider("bootstrapper",function(){return{$get:["$http","$q",function(e,o){return{bootstrap:function(r){var n=o.defer();return e.get("config.json").success(function(e){var o=angular.module(r);angular.forEach(e,function(e,r){o.constant(r,e)}),angular.bootstrap(document,[r]),n.resolve()}).error(function(){console.log("Could not initialize application, configuration could not be loaded."),n.reject()}),n.promise}}}]}});var appContainer=document.createElement("div");bootstrapModule.run(["bootstrapper",function(e){e.bootstrap("Framework").then(function(){appContainer.remove()})}]),angular.element(document).ready(function(){angular.bootstrap(appContainer,["bootstrapModule"])});var framework=angular.module("Framework",["ui.router","ui.bootstrap","ngTouch","Framework.Services"]),validateConfigFileStructure=function(e){var o=function(e,o){var r=function(o){console.log("Config.json Validation Error: View/Component '"+e+"' "+o)};return o?o.model&&!o.modelbuilder?(r(" is invalid: if includes model, must also include modelbuilder"),!1):o.modelbuilder&&!o.model?(r(" is invalid: if includes modelbuilder, must also include model"),!1):o.actions&&!o.controller?(r(" is invalid: if includes actions, must also include controller"),!1):o.modelbuilder&&!o.controller?(r(" is invalid: if includes modelbuilder, must also include controller"),!1):!0:(r("can't be validated"),!1)},r=!0;if(e.defaultView&&e.views[e.defaultView]&&(o(e.defaultView,e.views[e.defaultView])||(console.log("Config defaultView exists, but points to an invalid view"),r=!1)),e.views)for(var n in e.views){var t=e.views[n];o(n,t)||(console.log("	View '"+n+"' is invalid with broken template or controller"),r=!1),t.regions&&(t.url||(console.log("View '"+n+"' is invalid: cannot specify regions without 'url' property"),r=!1))}if(e.components)for(var i in e.components)o(i,e.components[i])||(r=!1,console.log("	Component '"+i+"' is invalid with broken template or controller"));return r};framework.config(["$stateProvider","$urlRouterProvider","applicationConfig","$compileProvider","$provide","RouterProvider",function(e,o,r,n,t,i){this.applicationConfig=r,this.postConfigProvider=t,framework._directive=framework.directive,framework.directive=function(e,o){return n.directive(e,o),this},validateConfigFileStructure(r)||console.log("SlimUI ERROR: config.json file is invalid");var a=function(o,n,t){var i,l=function(e,o){var r="";for(var n in o){var t=o[n];r+="/{"+t+"}"}return"/"==e&&(e=""),"/"+e+r},c=function(e,o){return e&&o?o+"."+e:e?e:void console.log("Error: Can't create router state from view name and/or parent view name")};i=n.url?l(n.url,n.parameters):l(o,n.parameters);var s=c(o,t),d={url:i,template:"<div "+o+"></div>"};e.state(s,d);for(var u in n.subroutes){var f=n.subroutes[u],m=r.views[f];a(f,m,t?t+"."+o:o)}};for(var l in r.views){var c=r.views[l];void 0!==c.url&&a(l,c)}var s=r.views[r.defaultView],d=s.url;if(s.parameters)for(var u=0;u<s.parameters.length;u++)d+="/";i.setHomeRoute(d),o.otherwise(function(e,o){return console.log("Invalid location '"+o.$$url+"', going to default route '"+d+"'"),d})}]),framework.run(function(){var e=function(e,o){var r=e.toLowerCase();framework.directive(r,["$http","$controller","$compile","$templateCache","$injector","$q","$stateParams",function(r,n,t,i,a,l,c){function s(r,i){var l=r.$new(),s=e+"Template",d=e+"Model",u=e+"Modelbuilder",f=e+"Actions",m=e+"Controller",v=!1;if(o.template&&!window[s]&&(console.log("Couldn't correctly load template named '"+s+"'."),v=!0),o.model&&!window[d]&&(console.log("Couldn't correctly load model named '"+d+"'."),v=!0),o.model&&!window[d]&&(console.log("Couldn't correctly load modelbuilder named '"+u+"'."),v=!0),o.model&&!window[d]&&(console.log("Couldn't correctly load actions named '"+f+"'."),v=!0),o.model&&!window[d]&&(console.log("Couldn't correctly load controller named '"+m+"'."),v=!0),v)return void console.log("Check spelling in file and config.json. Aborting creation of '"+e+"'");var g=function(e){var o;try{o=a.annotate(window[e])}catch(r){console.log("Error: Failed to find dependency injection information for '"+e+"'.\n	Please check in the file that the function name is spelled correctly.")}var n=[];for(var t in o){var i=o[t];if("Context"!=i&&"Actions"!=i&&"Model"!=i&&"Modelbuilder"!=i&&"StateParameters"!=i)try{a.get(i)}catch(l){n.push(i)}}n.length&&console.log("Error: Not all of "+e+"'s dependencies have been loaded correctly.\n	Missing dependencies: "+n.toString()+"\nIf these are newly-added dependency injections, have they been added to config.json and named correctly? Additionally, check that the spelling in "+e+" matches the function name in the dependency's JavaScript file.")};o.modelbuilder&&g(u),o.actions&&g(f),o.controller&&g(m);var p,w,h;if(window[d])try{var C={Model:window[d]()};p=n(window[u],C)}catch(b){console.log("Error: Could not inject model into modelbuilder '"+u+"'. Exception: \n	"+b.message)}if(window[f])try{var y={Context:l};p&&(y.Modelbuilder=p),w=n(window[f],y)}catch(b){console.log("Error: Could not inject context or modelbuilder into actions '"+f+"'. Exception: \n	"+b.message)}try{var k={Context:l,StateParameters:c};p&&(k.Modelbuilder=p),w&&(k.Actions=w),h=n(window[m],k)}catch(b){console.log("Error: Could not inject dependencies into controller '"+m+"'. Likely cause: Actions or Modelbuilder is trying to use a service that was not injected. Check Actions and Modelbuilder injections. Exception: \n	"+b.message)}i.html(window[s]),i.children().data("$ngControllerController",h),t(i.contents())(l)}return{link:s,scope:{attributeParameter:"@"}}}])},o=function(e){return function(){return{template:e}}},r=function(r,n){n.model||n.modelbuilder||n.actions||n.controller?e(r,n):(templateName=r+"Template",r=r.toLowerCase(),framework.directive(r,o(window[templateName])))};for(var n in this.applicationConfig.components){var t=applicationConfig.components[n];r(n,t)}for(var i in this.applicationConfig.views){var a=applicationConfig.views[i];r(i,a)}window.servicesToInject={};var l=function(e){return{$get:window[e]}};for(var c in this.applicationConfig.services)window[c]?(window.servicesToInject[c]=l(c),this.postConfigProvider.provider(c,window.servicesToInject[c])):console.log("Error: '"+c+"' service was specified in config.json but has not been loaded. Check that it exists in your compiled application.")});var framework=angular.module("Framework.Services",[]);framework.provider("Router",function(){var e,o={notRouting:"Router is not navigating to the same route",routingHome:"Router is going to default screen "};return{$get:["$state",function(r){return{goTo:function(e,n){r.current.name!==e||n?r.go(e,n):console.log(o.notRouting)},goToHome:function(){console.log(o.routingHome+e),r.go(e)},getStateParameters:function(){return r.params}}}],setHomeRoute:function(o){e=o}}}),framework.provider("ControllerCommunication",function(){var e={},o={};return{$get:function(){return{registerCallback:function(e,r){o[e]||(o[e]=[]),o[e].push(r)},notifyObservers:function(e){o[e]&&o[e].length&&angular.forEach(o[e],function(e){e()})},get:function(o){return"undefined"!=e[o]?e[o]:(console.log("ControllerCommunication Error: no channel '"+o+"' existing to return data"),!1)},set:function(o,r){e[o]=r,this.notifyObservers(o)}}}}}),framework.provider("FrameworkAJAX",function(){return{$get:["$http",function(e){return{sendRequest:function(o,r,n){return o.method&&o.url&&o.data?e(o).success(r).error(n):void console.log("Error making AJAX request: missing method, url, or data.")}}}]}}),framework.provider("Promise",function(){return{$get:["$q",function(e){return{promisesStorage:{},createDeferred:function(o){return this.promisesStorage[o]=e.defer(),!0},getPromise:function(e){return this.promisesStorage[e]?this.promisesStorage[e].promise:(console.log("Can't return promise: deferred not created correctly"),!1)},resolveDeferred:function(e,o){return this.promisesStorage[e]&&this.promisesStorage[e].resolve?(this.promisesStorage[e].resolve(o),!0):(console.log("Can't resolve: deferred not created correctly"),!1)},rejectDeferred:function(e,o){return this.promisesStorage[e]&&this.promisesStorage[e].reject?(this.promisesStorage[e].reject(o),!0):(console.log("Can't reject: deferred not created correctly"),!1)}}}]}});